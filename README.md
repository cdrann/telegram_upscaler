# ML System Design Doc 
## Дизайн ML системы - Telegram Upscaler 1.0

### 1. Цели и предпосылки 
#### 1.1. Зачем идем в разработку продукта?  

  Создание инструмента (Telegram-бота) для апскейла фотографий досок, например, для учебных заведений, тренинговых центров или индивидуального использования. Это позволит пользователям улучшить качество визуального контента без необходимости специализированных знаний или программ.
  
  Использование машинного обучения для апскейла изображений позволит автоматически улучшать качество фотографий без потери важных деталей, что вручную занимало бы гораздо больше времени и ресурсов.
  
  Успешной итерацией будет считаться достижение высокой степени удовлетворенности пользователей качеством апскейла и удобством использования бота, а также в будущем достижение определенного количества активных пользователей в месяц.

#### 1.2. Бизнес-требования и ограничения  

Продукт должен обеспечивать быстрый и качественный апскейл фотографий досок с текстом или другими визуальными элементами. Пользователь отправляет обрезанную фотографию доски, и в течение минуты получает улучшенное изображение.

Время обработки изображения не должно превышать 2 минуты. Работа бота должна быть стабильной при одновременном обращении нескольких пользователей.

На первом этапе мы ожидаем успешную интеграцию ML-модели для апскейла изображений в Telegram-бота и достижение первых положительных отзывов от пользователей.

Бизнес процесс выглядит следующим образом: пользователи загружают фотографии через Telegram-бота, система обрабатывает запросы и возвращает улучшенные изображения.

Успешным пилотом будем определять количеством активных пользователей, положительными отзывами о качестве апскейла и надежностью работы системы.

#### 1.3. Что входит в скоуп проекта/итерации, что не входит   

В скоуп итерации входит разработка и интеграция ML-модели для апскейла изображений, создание Telegram-бота для взаимодействия с пользователем. Расширенные функции бота, такие как автоматическое распознавание текста на изображении или интеграция с другими платформами, будут рассмотрены в последующих итерациях.
Код должен быть чистым, хорошо документированным и легко масштабируемым для будущих улучшений.
Некоторые возможные оптимизации производительности или расширения функционала могут быть отложены до следующих итераций.


#### 1.4. Предпосылки решения  

- Описание всех общих предпосылок решения, используемых в системе – с обоснованием от запроса бизнеса: какие блоки данных используем, горизонт прогноза, гранулярность модели, и др.  

### 2. Методология      

#### 2.1. Постановка задачи  

- Что делаем с технической точки зрения: рекомендательная система, поиск аномалий, прогноз, оптимизация, и др. 

#### 2.2. Блок-схема решения  

- Блок-схема для бейзлайна и основного MVP с ключевыми этапами решения задачи: подготовка данных, построение прогнозных моделей, оптимизация, тестирование, закрытие технического долга, подготовка пилота, другое.   

 

#### 2.3. Этапы решения задачи 

   Этап 1 - Подготовка данных:
- Сбор данных: фотографии досок с различным контентом (текст, графики).

Этап 2 - Подготовка прогнозных моделей:
- MVP: Использование модели на основе существующих решений для апскейла изображений.

Этап 3 - Интерпретация моделей:

Этап 4 - Интеграция бизнес правил:
- Определение бизнес правил для финальной проверки качества улучшенных изображений перед отправкой пользователю.

Этап 5 - Подготовка инференса модели по итерациям:
- Разработка системы для эффективного запуска модели в реальном времени с минимальной задержкой.

Этап 6 - Интеграция бизнес правил:
- Дополнительная проверка на соответствие бизнес требованиям перед окончательной отправкой изображения пользователю.

Этап 7 - Разработка оптимизатора:
- Выбор оптимальной модели на основе результатов тестирования различных подходов.

Этап 8 - Подготовка финального отчета:
- Составление отчета о достигнутых результатах, проблемах, возможностях для улучшения и рекомендациях по дальнейшему развитию проекта.
  
### 3. Подготовка пилота  
  
#### 3.1. Способ оценки пилота  
  
 Для оценки пилота будет использоваться комбинация количественных и качественных метрик. Количественные метрики включают время обработки изображения, процент успешно обработанных запросов, и уровень улучшения качества изображения на основе стандартных метрик, таких как PSNR (Peak Signal-to-Noise Ratio) и SSIM (Structural Similarity Index). Качественная оценка будет проведена посредством сбора обратной связи от пользователей через опросы и интервью.
  
#### 3.2. Что считаем успешным пилотом  
  
Формализованные в пилоте метрики оценки успешности:
- Время обработки изображения не превышает 10 секунд в 95% случаев.
- Процент успешно обработанных запросов не менее 98%.
- Улучшение качества изображения на 20% и более по сравнению с исходным, оцениваемое через PSNR и SSIM.
- 80% положительных отзывов от пользователей по результатам опросов.
  
#### 3.3. Подготовка пилота  
  
 
### 4. Внедрение `для production систем, если требуется`    
  
#### 4.1. Архитектура решения   
  
   
#### 4.2. Описание инфраструктуры и масштабируемости 
   
  
#### 4.3. Требования к работе системы  
  

  
#### 4.4. Безопасность системы  
  
Основные уязвимости связаны с безопасностью хранения данных пользователей и защитой API от неавторизованного доступа.
  
#### 4.5. Безопасность данных   
  
Для соответствия GDPR и другим законам о защите данных, система реализует функции по обеспечению конфиденциальности данных пользователей, возможности их удаления по запросу и защите от неавторизованного доступа.
  
#### 4.6. Издержки  
  
Издержки будут в будущем зависеть от объема использования ресурсов облачной инфраструктуры и могут быть определены только после тестирования системы под нагрузкой.
  
#### 4.5. Integration points  
  
Взаимодействие между сервисами будет осуществляться через REST API, что обеспечит гибкость интеграции и возможность масштабирования системы.
  
#### 4.6. Риски  
  
Основные риски связаны с возможными перебоями в работе облачной инфраструктуры, необходимостью масштабирования системы при увеличении числа пользователей и потенциальными уязвимостями в безопасности данных.  
